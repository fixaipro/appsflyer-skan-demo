<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AppsFlyer SKAN Interactive Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            animation: slideIn 0.6s ease;
        }

        .nav-tab {
            background: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px 10px 0 0;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #667eea;
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .nav-tab:hover::before {
            left: 100%;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .content-panel {
            background: white;
            border-radius: 0 10px 10px 10px;
            padding: 30px;
            min-height: 500px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            animation: fadeInUp 0.7s ease;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: contentFade 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes contentFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .section-title {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, #764ba2, transparent);
        }

        .info-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .info-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        .flow-diagram {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .flow-step {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .flow-step:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .flow-arrow {
            text-align: center;
            color: #667eea;
            font-size: 24px;
            margin: 10px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(5px); }
        }

        .code-container {
            background: #1e1e1e;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .code-header {
            background: #2d2d2d;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #444;
        }

        .code-language {
            color: #4fc3f7;
            font-weight: 600;
            font-size: 14px;
        }

        .copy-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .code-content {
            padding: 20px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            color: #d4d4d4;
            white-space: pre;
        }

        .schema-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .schema-card {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .schema-card::before {
            content: '';
            position: absolute;
            top: -100%;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: top 0.3s ease;
            z-index: 0;
        }

        .schema-card:hover::before {
            top: 0;
        }

        .schema-card:hover {
            color: white;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .schema-card * {
            position: relative;
            z-index: 1;
        }

        .bit-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .schema-card:hover .bit-value {
            color: white;
        }

        .event-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .event-type {
            font-size: 12px;
            color: #666;
        }

        .schema-card:hover .event-type {
            color: rgba(255,255,255,0.9);
        }

        .interactive-demo {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: white;
        }

        .demo-controls {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .demo-btn {
            background: white;
            color: #f5576c;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .demo-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(245, 87, 108, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.5s ease, height 0.5s ease;
        }

        .demo-btn:hover::after {
            width: 300px;
            height: 300px;
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .demo-output {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            min-height: 100px;
            backdrop-filter: blur(10px);
        }

        .highlight {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            padding: 2px 8px;
            border-radius: 5px;
            color: #2d3436;
            font-weight: 600;
            display: inline-block;
            margin: 2px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            animation: blink 2s infinite;
        }

        .status-granted {
            background: #00b894;
        }

        .status-denied {
            background: #ff7675;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .download-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            margin: 20px 0;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .code-section {
            margin: 30px 0;
        }

        .code-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ AppsFlyer SKAN Interactive Demo</h1>
            <p>Complete Technical Guide for App Development Teams</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="overview">üìä SKAN Overview</button>
            <button class="nav-tab" data-tab="appsflyer">üéØ AppsFlyer SKAN</button>
            <button class="nav-tab" data-tab="implementation">üíª Flutter Implementation</button>
            <button class="nav-tab" data-tab="configuration">‚öôÔ∏è Configuration</button>
            <button class="nav-tab" data-tab="studio">üé® Conversion Studio</button>
            <button class="nav-tab" data-tab="requirements">üìã Technical Requirements</button>
            <button class="nav-tab" data-tab="demo">üéÆ Interactive Demo</button>
        </div>

        <div class="content-panel">
            <!-- SKAN Overview Tab -->
            <div id="overview" class="tab-content active">
                <h2 class="section-title">What is SKAdNetwork (SKAN)?</h2>
                
                <div class="info-card">
                    <h3>üì± Introduction</h3>
                    <p>SKAdNetwork is Apple's privacy-preserving attribution framework introduced to maintain user privacy while enabling app install attribution and campaign measurement.</p>
                </div>

                <div class="info-card">
                    <h3>üîí Why Was SKAN Introduced?</h3>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>iOS 14.5+ App Tracking Transparency (ATT) framework</li>
                        <li>User privacy protection - no device-level data sharing</li>
                        <li>Aggregate campaign performance measurement</li>
                        <li>Elimination of IDFA dependency</li>
                    </ul>
                </div>

                <div class="flow-diagram">
                    <h3>üìà SKAN Data Flow</h3>
                    <div class="flow-step">
                        <strong>1. Ad Display</strong>
                        <p>User sees ad in source app</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>2. App Install</strong>
                        <p>User installs advertised app from App Store</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>3. Conversion Value Update</strong>
                        <p>App updates conversion value (0-63) based on user actions</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>4. Timer Window</strong>
                        <p>24-48 hour timer + random delay</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>5. Postback to Ad Network</strong>
                        <p>Apple sends attribution data to ad network</p>
                    </div>
                </div>

                <h2 class="section-title" style="margin-top: 40px;">Digital App Signals in SKAN</h2>

                <div class="info-card">
                    <h3>1Ô∏è‚É£ Primary SKAN Signals</h3>
                    
                    <h4 style="color: #667eea; margin-top: 15px;">üì± Conversion Value (CV)</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Range:</strong> 0-63 (6-bit value)</li>
                        <li><strong>Purpose:</strong> Encodes post-install user behavior</li>
                        <li><strong>Update Window:</strong> 0-72 hours post-install</li>
                        <li><strong>Key Rule:</strong> Can only increase, never decrease</li>
                    </ul>
                    
                    <div class="code-container" style="margin-top: 15px;">
                        <div class="code-header">
                            <span class="code-language">Swift - iOS Implementation</span>
                        </div>
                        <div class="code-content">// Update conversion value in iOS
SKAdNetwork.updateConversionValue(42) // Updates to value 42</div>
                    </div>

                    <h4 style="color: #667eea; margin-top: 20px;">üéØ Source App ID</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>What it is:</strong> Bundle ID of app where ad was displayed</li>
                        <li><strong>Privacy Threshold:</strong> Only shared if enough installs occur</li>
                        <li><strong>Purpose:</strong> Helps identify which publisher app drove the install</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 20px;">üè∑Ô∏è Campaign ID</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Range:</strong> 1-100</li>
                        <li><strong>Purpose:</strong> Identifies which ad campaign drove the install</li>
                        <li><strong>Configuration:</strong> Set by advertiser in ad network</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>2Ô∏è‚É£ SKAN 4.0+ Additional Signals</h3>
                    
                    <h4 style="color: #667eea; margin-top: 15px;">üìà Coarse Conversion Value</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Low:</strong> Basic user engagement</li>
                        <li><strong>Medium:</strong> Moderate user value</li>
                        <li><strong>High:</strong> High-value user actions</li>
                        <li><strong>Null:</strong> If insufficient data for privacy</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 20px;">üîó Source Domain</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Web-to-app attribution support</li>
                        <li>Shows domain where ad was displayed (Safari/web)</li>
                        <li>Enables mobile web campaign tracking</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 20px;">‚è∞ Multiple Conversion Windows</h4>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <strong>Window 1:</strong> 0-2 days (fine-grained CV)<br>
                        <strong>Window 2:</strong> 3-7 days (coarse CV)<br>
                        <strong>Window 3:</strong> 8-35 days (coarse CV only)
                    </div>
                </div>

                <div class="info-card">
                    <h3>3Ô∏è‚É£ Conversion Value Mapping Examples</h3>
                    
                    <h4 style="color: #667eea; margin-top: 15px;">üí∞ Revenue-Focused Schema</h4>
                    <div class="code-container" style="margin-top: 10px;">
                        <div class="code-header">
                            <span class="code-language">6-Bit Mapping</span>
                        </div>
                        <div class="code-content">Bits 0-1: Revenue Bands
  00 = $0
  01 = $1-50
  10 = $51-100
  11 = $100+

Bit 2: Subscription Started (1/0)
Bit 3: Premium Feature Used (1/0)
Bit 4: Tutorial Completed (1/0)
Bit 5: Social Share (1/0)</div>
                    </div>

                    <h4 style="color: #667eea; margin-top: 20px;">üìä Engagement-Focused Schema</h4>
                    <div class="code-container" style="margin-top: 10px;">
                        <div class="code-header">
                            <span class="code-language">6-Bit Mapping</span>
                        </div>
                        <div class="code-content">Bits 0-2: Session Count
  000 = 0 sessions
  001 = 1 session
  010 = 2-3 sessions
  011 = 4-5 sessions
  100 = 6-10 sessions
  101 = 11+ sessions

Bit 3: Push Notification Enabled
Bit 4: Account Created
Bit 5: Content Viewed</div>
                    </div>

                    <h4 style="color: #667eea; margin-top: 20px;">üîÑ Signal Flow in Practice</h4>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <strong>User Action ‚Üí App Event ‚Üí Conversion Value Update ‚Üí SKAN Postback</strong><br><br>
                        <strong>Example Flow:</strong><br>
                        1. <strong>Install:</strong> CV = 0<br>
                        2. <strong>Tutorial Complete:</strong> CV = 16 (bit 4 set)<br>
                        3. <strong>First Purchase $25:</strong> CV = 17 (bits 0 and 4 set)<br>
                        4. <strong>Second Purchase $75:</strong> CV = 19 (bits 0-1 and 4 set)<br>
                        5. <strong>Subscribe:</strong> CV = 23 (bits 0-2 and 4 set)
                    </div>
                </div>
            </div>

            <!-- AppsFlyer SKAN Tab -->
            <div id="appsflyer" class="tab-content">
                <h2 class="section-title">AppsFlyer SKAN Solution</h2>

                <div class="info-card">
                    <h3>üéØ What is AppsFlyer SKAN?</h3>
                    <p>AppsFlyer's advanced solution that maximizes the value of SKAdNetwork data through intelligent conversion value mapping, predictive analytics, and comprehensive reporting.</p>
                </div>

                <div class="flow-diagram">
                    <h3>üîÑ AppsFlyer SKAN Data Flow</h3>
                    <div class="flow-step">
                        <strong>1. SDK Integration</strong>
                        <p>AppsFlyer SDK tracks events and manages CV updates</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>2. Event Mapping</strong>
                        <p>Events mapped to 6-bit conversion value schema</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>3. Smart CV Management</strong>
                        <p>Optimized CV updates within Apple's constraints</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>4. Data Collection</strong>
                        <p>SKAN postbacks received and processed</p>
                    </div>
                    <div class="flow-arrow">‚Üì</div>
                    <div class="flow-step">
                        <strong>5. Analytics & Reporting</strong>
                        <p>Enriched data with predictive analytics in dashboard</p>
                    </div>
                </div>

                <h2 class="section-title" style="margin-top: 40px;">AppsFlyer Enhanced Digital Signals</h2>

                <div class="info-card">
                    <h3>4Ô∏è‚É£ AppsFlyer Enhanced Signals</h3>
                    <p>Beyond standard SKAN signals, AppsFlyer adds advanced analytics and predictions:</p>
                    
                    <h4 style="color: #667eea; margin-top: 15px;">ü§ñ Predictive Analytics</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Predicted LTV:</strong> Machine learning models estimate lifetime value based on early user behavior</li>
                        <li><strong>Churn Probability:</strong> Likelihood of user retention calculated from engagement patterns</li>
                        <li><strong>Conversion Probability:</strong> Chance of making purchase based on similar user cohorts</li>
                        <li><strong>Revenue Predictions:</strong> Expected revenue in next 7, 14, 30 days</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 20px;">üìä Aggregated Metrics</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>ARPU (Average Revenue Per User):</strong> Revenue metrics across campaigns</li>
                        <li><strong>Retention Rates:</strong> Day 1, 3, 7, 14, 30 retention cohorts</li>
                        <li><strong>Cohort Performance:</strong> Comparative analysis across user segments</li>
                        <li><strong>ROI Calculations:</strong> Campaign profitability analysis</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>5Ô∏è‚É£ Signal Flow in AppsFlyer</h3>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-language">Flutter/Dart Implementation</span>
                            <button class="copy-btn" onclick="copyCode('signal-flow-code')">üìã Copy Code</button>
                        </div>
                        <div class="code-content" id="signal-flow-code">class SKANSignalManager {
  int _conversionValue = 0;
  
  // Update conversion value based on user actions
  void updateSignals({
    double? revenue,
    bool? signedUp,
    bool? madePayment,
    bool? subscribedPremium,
    int? sessionCount,
  }) {
    int newCV = _conversionValue;
    
    // Revenue bands (bits 0-1)
    if (revenue != null) {
      if (revenue > 100) {
        newCV |= 0x03; // Set bits 0-1 to 11
      } else if (revenue > 50) {
        newCV |= 0x02; // Set bits 0-1 to 10
      } else if (revenue > 0) {
        newCV |= 0x01; // Set bits 0-1 to 01
      }
    }
    
    // User actions (bits 2-5)
    if (signedUp == true) newCV |= 0x04;      // Bit 2
    if (madePayment == true) newCV |= 0x08;    // Bit 3
    if (subscribedPremium == true) newCV |= 0x10; // Bit 4
    
    // Session engagement (bit 5)
    if (sessionCount != null && sessionCount > 3) {
      newCV |= 0x20; // Bit 5
    }
    
    // Only update if value increases
    if (newCV > _conversionValue) {
      _conversionValue = newCV;
      _sendToAppsFlyer(newCV);
    }
  }
  
  void _sendToAppsFlyer(int cv) {
    // AppsFlyer handles the actual SKAN update
    print('Updating SKAN CV to: $cv');
  }
}</div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>6Ô∏è‚É£ Privacy-Preserving Signals</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div>
                            <h4 style="color: #ff6b6b;">‚ùå What SKAN Does NOT Send:</h4>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>User ID or Device ID (IDFA)</li>
                                <li>Exact timestamp of install</li>
                                <li>Exact timestamp of conversion</li>
                                <li>IP address</li>
                                <li>Detailed user demographics</li>
                                <li>Exact revenue amounts</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #51cf66;">‚úÖ What SKAN DOES Send:</h4>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>Aggregated conversion value</li>
                                <li>Campaign ID</li>
                                <li>Source app (with threshold)</li>
                                <li>Coarse timing (window-based)</li>
                                <li>Install validation</li>
                                <li>Coarse conversion value (SKAN 4.0)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>7Ô∏è‚É£ Signal Optimization Strategies with AppsFlyer</h3>
                    
                    <h4 style="color: #667eea; margin-top: 15px;">üõçÔ∏è For E-commerce Apps:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Focus bits on revenue ranges and purchase frequency</li>
                        <li>Track cart value tiers and checkout completion</li>
                        <li>Monitor product category performance</li>
                        <li>Use AppsFlyer's revenue prediction models</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 20px;">üéÆ For Gaming Apps:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Track level progression milestones</li>
                        <li>Monitor in-app purchase tiers</li>
                        <li>Measure retention checkpoints</li>
                        <li>Leverage AppsFlyer's player LTV predictions</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 20px;">üì± For Subscription Apps:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Track trial starts and conversions</li>
                        <li>Monitor subscription tier upgrades</li>
                        <li>Measure feature adoption rates</li>
                        <li>Use AppsFlyer's churn prediction models</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>8Ô∏è‚É£ Testing Digital Signals in AppsFlyer</h3>
                    
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-language">iOS Test Configuration</span>
                        </div>
                        <div class="code-content">// SKAdNetwork Test Profile
{
  "SKAdNetworkTestMode": true,
  "TestConversionValues": [0, 15, 31, 63],
  "TestPostbackDelay": 5, // seconds instead of 24-48 hours
  "AppsFlyerTestMode": true,
  "DebugVerbosity": "high"
}</div>
                    </div>

                    <h4 style="color: #667eea; margin-top: 20px;">Testing Steps:</h4>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Register test device in AppsFlyer dashboard</li>
                        <li>Enable SKAN debug mode in SDK</li>
                        <li>Use Apple's SKAdNetwork test profile</li>
                        <li>Monitor real-time CV updates in debug console</li>
                        <li>Validate postbacks in AppsFlyer test dashboard</li>
                    </ol>
                </div>

                <div class="info-card">
                    <h3>9Ô∏è‚É£ Signal Limitations & AppsFlyer Workarounds</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                        <div>
                            <h4 style="color: #ff6b6b;">‚ö†Ô∏è SKAN Limitations:</h4>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>Only 64 possible values (6 bits)</li>
                                <li>Can't decrease once set</li>
                                <li>24-48 hour delay in reporting</li>
                                <li>No user-level data</li>
                                <li>Limited attribution windows</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: #51cf66;">üí° AppsFlyer Solutions:</h4>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>Predictive modeling for full LTV</li>
                                <li>Statistical models to fill gaps</li>
                                <li>Aggregated cross-campaign reporting</li>
                                <li>Machine learning pattern recognition</li>
                                <li>Single Source of Truth dashboard</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üîü AppsFlyer Conversion Studio</h3>
                    <p>Visual tool for optimizing your conversion value schema:</p>
                    
                    <h4 style="color: #667eea; margin-top: 15px;">Key Features:</h4>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li><strong>Visual Schema Builder:</strong> Drag-and-drop interface for CV configuration</li>
                        <li><strong>Revenue Optimizer:</strong> Automatically suggests optimal revenue bands</li>
                        <li><strong>A/B Testing:</strong> Test different schemas across user segments</li>
                        <li><strong>Performance Simulator:</strong> Preview expected results before deployment</li>
                        <li><strong>Smart Recommendations:</strong> AI-powered suggestions based on your app type</li>
                    </ul>

                    <h4 style="color: #667eea; margin-top: 20px;">Schema Templates:</h4>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <strong>‚Ä¢ E-commerce Template:</strong> Revenue + Cart + Checkout signals<br>
                        <strong>‚Ä¢ Gaming Template:</strong> Level + IAP + Retention signals<br>
                        <strong>‚Ä¢ Subscription Template:</strong> Trial + Tier + Engagement signals<br>
                        <strong>‚Ä¢ Custom Template:</strong> Build your own from scratch
                    </div>
                </div>

                <div class="info-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h3>üöÄ AppsFlyer SKAN Advantages</h3>
                    <ul style="margin-left: 20px; margin-top: 15px; color: white;">
                        <li>‚ú® <strong>Enhanced Analytics:</strong> Go beyond basic SKAN with predictive models</li>
                        <li>üìä <strong>Unified Dashboard:</strong> Single view for all attribution data</li>
                        <li>üîÆ <strong>Predictive Insights:</strong> LTV and churn predictions from limited data</li>
                        <li>üéØ <strong>Smart Optimization:</strong> AI-powered CV schema recommendations</li>
                        <li>üõ°Ô∏è <strong>Privacy Compliant:</strong> Full adherence to Apple's guidelines</li>
                        <li>‚ö° <strong>Real-time Processing:</strong> Immediate CV updates and monitoring</li>
                        <li>üîß <strong>Easy Integration:</strong> Simple SDK with Flutter support</li>
                    </ul>
                </div>
            </div>

            <!-- Flutter Implementation Tab -->
            <div id="implementation" class="tab-content">
                <h2 class="section-title">Flutter/Dart Implementation - Complete Code</h2>
                
                <p style="margin-bottom: 20px;">Complete implementation handling all three scenarios: consent granted, consent denied, and runtime consent changes.</p>
                
                <button class="download-btn" onclick="downloadAllCode()">üì• Download All Flutter Code</button>

                <!-- Main Manager Implementation -->
                <div class="code-section">
                    <h3>üì± Complete SKAN Manager (appsflyer_skan_manager.dart)</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-language">Flutter/Dart</span>
                            <button class="copy-btn" onclick="copyCode('manager-code')">üìã Copy Code</button>
                        </div>
                        <div class="code-content" id="manager-code">import 'package:appsflyer_sdk/appsflyer_sdk.dart';
import 'package:app_tracking_transparency/app_tracking_transparency.dart';
import 'package:shared_preferences/shared_preferences.dart';
import 'dart:async';
import 'dart:io' show Platform;

/// Complete AppsFlyer SKAN Manager Class
/// Handles all tracking scenarios: consent granted, denied, and runtime changes
class AppsFlyerSKANManager {
  // Singleton pattern
  static final AppsFlyerSKANManager _instance = AppsFlyerSKANManager._internal();
  factory AppsFlyerSKANManager() => _instance;
  AppsFlyerSKANManager._internal();

  // SDK instance
  AppsflyerSdk? _appsflyerSdk;
  
  // State management
  bool _isInitialized = false;
  bool _hasConsent = false;
  bool _isStopped = false;
  TrackingStatus? _currentTrackingStatus;
  
  // Stream for consent changes
  final _consentStateController = StreamController<bool>.broadcast();
  Stream<bool> get consentStateStream => _consentStateController.stream;
  
  // Configuration
  static const String AF_DEV_KEY = 'YOUR_APPSFLYER_DEV_KEY';
  static const String APP_ID = 'YOUR_APP_STORE_ID';
  
  /// Initialize SDK based on consent state
  Future<void> initialize() async {
    print('üöÄ Initializing AppsFlyerSKANManager...');
    
    if (!Platform.isIOS) {
      print('‚ö†Ô∏è SKAN is iOS only');
      return;
    }
    
    if (_isInitialized) {
      print('‚ö†Ô∏è Already initialized');
      return;
    }
    
    await _checkAndHandleTrackingStatus();
    _isInitialized = true;
    print('‚úÖ Initialization complete');
  }
  
  /// Check ATT status and initialize accordingly
  Future<void> _checkAndHandleTrackingStatus() async {
    _currentTrackingStatus = await AppTrackingTransparency.trackingAuthorizationStatus;
    
    print('üì± ATT Status: $_currentTrackingStatus');
    
    switch (_currentTrackingStatus) {
      case TrackingStatus.notDetermined:
        await _requestTrackingPermission();
        break;
      case TrackingStatus.authorized:
        await _initializeWithConsent();
        break;
      case TrackingStatus.denied:
      case TrackingStatus.restricted:
        await _initializeWithoutConsent();
        break;
      default:
        await _initializeWithoutConsent();
    }
  }
  
  /// Request ATT permission
  Future<void> _requestTrackingPermission() async {
    print('üîî Requesting ATT permission...');
    
    final status = await AppTrackingTransparency.requestTrackingAuthorization();
    _currentTrackingStatus = status;
    
    if (status == TrackingStatus.authorized) {
      await _initializeWithConsent();
    } else {
      await _initializeWithoutConsent();
    }
  }
  
  // =============================================
  // SCENARIO A: CONSENT GRANTED
  // =============================================
  
  Future<void> _initializeWithConsent() async {
    print('‚úÖ SCENARIO A: Initializing with CONSENT GRANTED');
    
    _hasConsent = true;
    _consentStateController.add(true);
    
    // Configure for full tracking
    final options = AppsFlyerOptions(
      afDevKey: AF_DEV_KEY,
      appId: APP_ID,
      showDebug: true,
      timeToWaitForATTUserAuthorization: 10.0,
      disableIDFACollection: false, // ENABLE IDFA
      disableAdvertisingIdentifier: false, // ENABLE ad ID
      disableCollectASA: false, // ENABLE Apple Search Ads
    );
    
    _appsflyerSdk = AppsflyerSdk(options);
    
    // Enable all callbacks
    _appsflyerSdk!.initSdk(
      registerConversionDataCallback: true,
      registerOnAppOpenAttributionCallback: true,
      registerOnDeepLinkingCallback: true
    );
    
    // Set up callbacks
    _appsflyerSdk!.onInstallConversionData((data) {
      print('üìä Conversion Data: $data');
      _handleConversionData(data);
    });
    
    _appsflyerSdk!.onDeepLinking((result) {
      print('üîó Deep Link: ${result.deepLink}');
    });
    
    // Start SDK
    _appsflyerSdk!.startSDK();
    _isStopped = false;
    
    print('üöÄ Full tracking enabled with IDFA');
  }
  
  // =============================================
  // SCENARIO B: CONSENT DENIED
  // =============================================
  
  Future<void> _initializeWithoutConsent() async {
    print('üîí SCENARIO B: Initializing with CONSENT DENIED');
    
    _hasConsent = false;
    _consentStateController.add(false);
    
    // Configure for SKAN-only
    final options = AppsFlyerOptions(
      afDevKey: AF_DEV_KEY,
      appId: APP_ID,
      showDebug: false,
      timeToWaitForATTUserAuthorization: 0.0,
      disableIDFACollection: true, // DISABLE IDFA
      disableAdvertisingIdentifier: true, // DISABLE ad ID
      disableCollectASA: true, // DISABLE Apple Search Ads
    );
    
    _appsflyerSdk = AppsflyerSdk(options);
    
    // Minimal callbacks
    _appsflyerSdk!.initSdk(
      registerConversionDataCallback: false,
      registerOnAppOpenAttributionCallback: false,
      registerOnDeepLinkingCallback: false
    );
    
    // Enable anonymization
    _appsflyerSdk!.anonymizeUser(true);
    
    // Start SDK
    _appsflyerSdk!.startSDK();
    _isStopped = false;
    
    print('üîê SKAN-only mode activated');
  }
  
  // =============================================
  // SCENARIO C: RUNTIME CONSENT CHANGES
  // =============================================
  
  Future<void> handleConsentChange(bool newConsentStatus) async {
    print('üîÑ SCENARIO C: Consent change detected');
    print('üîÑ From $_hasConsent to $newConsentStatus');
    
    if (_hasConsent == newConsentStatus) {
      print('‚ÑπÔ∏è No change needed');
      return;
    }
    
    if (newConsentStatus) {
      await _transitionToConsentGranted();
    } else {
      await _transitionToConsentDenied();
    }
  }
  
  /// Transition: DENIED ‚Üí GRANTED
  Future<void> _transitionToConsentGranted() async {
    print('üìà Transitioning: DENIED ‚Üí GRANTED');
    
    // Stop current instance
    if (_appsflyerSdk != null && !_isStopped) {
      _appsflyerSdk!.stop(true);
      _isStopped = true;
    }
    
    await Future.delayed(Duration(milliseconds: 500));
    
    // Reinitialize with full tracking
    await _initializeWithConsent();
    
    print('‚úÖ Transition complete: Full tracking active');
  }
  
  /// Transition: GRANTED ‚Üí DENIED
  Future<void> _transitionToConsentDenied() async {
    print('üìâ Transitioning: GRANTED ‚Üí DENIED');
    
    // Anonymize first
    if (_appsflyerSdk != null) {
      _appsflyerSdk!.anonymizeUser(true);
      _appsflyerSdk!.stop(true); // Clear data
      _isStopped = true;
    }
    
    await Future.delayed(Duration(milliseconds: 500));
    
    // Reinitialize in SKAN-only mode
    await _initializeWithoutConsent();
    
    print('‚úÖ Transition complete: SKAN-only active');
  }
  
  // =============================================
  // EVENT LOGGING
  // =============================================
  
  Future<void> logEvent(String eventName, Map<String, dynamic> params) async {
    if (_appsflyerSdk == null || _isStopped) {
      print('‚ö†Ô∏è Cannot log event: SDK not ready');
      return;
    }
    
    if (_hasConsent) {
      // Full tracking with all params
      print('üìä Logging FULL event: $eventName');
      _appsflyerSdk!.logEvent(eventName, params);
    } else {
      // Limited tracking - sanitize params
      print('üìä Logging LIMITED event: $eventName');
      final sanitized = _sanitizeParams(params);
      _appsflyerSdk!.logEvent(eventName, sanitized);
    }
  }
  
  Map<String, dynamic> _sanitizeParams(Map<String, dynamic> params) {
    // Remove PII for SKAN-only mode
    final sanitized = <String, dynamic>{};
    final allowedKeys = ['value', 'success', 'category', 'type'];
    
    params.forEach((key, value) {
      if (allowedKeys.contains(key)) {
        sanitized[key] = value;
      }
    });
    
    return sanitized;
  }
  
  void _handleConversionData(Map<dynamic, dynamic> data) {
    final status = data['af_status'];
    print('üìä Attribution: $status');
  }
  
  // SDK Control
  void startSDK() => _appsflyerSdk?.startSDK();
  void stopSDK() => _appsflyerSdk?.stop(false);
  
  // Getters
  bool get hasConsent => _hasConsent;
  bool get isInitialized => _isInitialized;
  
  void dispose() {
    _consentStateController.close();
    stopSDK();
  }
}</div>
                    </div>
                </div>

                <!-- Event Tracking Examples -->
                <div class="code-section">
                    <h3>üìä Event Tracking (event_tracker.dart)</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-language">Flutter/Dart</span>
                            <button class="copy-btn" onclick="copyCode('events-code')">üìã Copy Code</button>
                        </div>
                        <div class="code-content" id="events-code">import 'appsflyer_skan_manager.dart';

class EventTracker {
  final _manager = AppsFlyerSKANManager();
  
  /// Track purchase - adapts based on consent
  Future<void> trackPurchase({
    required double revenue,
    required String currency,
    required String productId,
    String? userId,
  }) async {
    final params = <String, dynamic>{
      'af_revenue': revenue,
      'af_currency': currency,
    };
    
    // Add details only with consent
    if (_manager.hasConsent) {
      params['af_content_id'] = productId;
      if (userId != null) params['customer_user_id'] = userId;
      print('üí∞ Full purchase tracking');
    } else {
      print('üí∞ Limited purchase tracking (SKAN only)');
    }
    
    await _manager.logEvent('af_purchase', params);
  }
  
  /// Track HBB Revenue
  Future<void> trackHBBRevenue(double amount) async {
    await _manager.logEvent('hbb_purchase', {
      'af_revenue': amount,
      'af_currency': 'USD',
      'channel': 'HBB',
    });
    print('üì∫ HBB Revenue: $amount');
  }
  
  /// Track Mobile Revenue
  Future<void> trackMobileRevenue(double amount) async {
    await _manager.logEvent('mobile_purchase', {
      'af_revenue': amount,
      'af_currency': 'USD',
      'platform': 'mobile',
    });
    print('üì± Mobile Revenue: $amount');
  }
  
  /// Track Sign Up
  Future<void> trackSignUp(String method, String? email) async {
    final params = <String, dynamic>{
      'af_registration_method': method,
    };
    
    // Only include email with consent
    if (_manager.hasConsent && email != null) {
      params['email_hash'] = email.hashCode.toString();
    }
    
    await _manager.logEvent('af_complete_registration', params);
    print('‚úçÔ∏è Sign up: $method');
  }
  
  /// Track Add to Cart
  Future<void> trackAddToCart(String productId, double price) async {
    final params = <String, dynamic>{
      'af_price': price,
      'af_currency': 'USD',
    };
    
    if (_manager.hasConsent) {
      params['af_content_id'] = productId;
    }
    
    await _manager.logEvent('af_add_to_cart', params);
    print('üõí Add to cart: $productId');
  }
  
  /// Track Checkout
  Future<void> trackCheckout(double total, int items) async {
    await _manager.logEvent('af_initiated_checkout', {
      'af_price': total,
      'af_currency': 'USD',
      'af_quantity': items,
    });
    print('üí≥ Checkout: $items items, total: $total');
  }
}</div>
                    </div>
                </div>

                <!-- Settings Screen -->
                <div class="code-section">
                    <h3>‚öôÔ∏è Privacy Settings Screen (privacy_settings.dart)</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-language">Flutter/Dart</span>
                            <button class="copy-btn" onclick="copyCode('settings-code')">üìã Copy Code</button>
                        </div>
                        <div class="code-content" id="settings-code">import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';
import 'appsflyer_skan_manager.dart';

class PrivacySettingsScreen extends StatefulWidget {
  @override
  _PrivacySettingsScreenState createState() => _PrivacySettingsScreenState();
}

class _PrivacySettingsScreenState extends State<PrivacySettingsScreen> {
  final _manager = AppsFlyerSKANManager();
  bool _trackingEnabled = false;
  bool _isLoading = false;
  
  @override
  void initState() {
    super.initState();
    _loadSettings();
    _listenToChanges();
  }
  
  Future<void> _loadSettings() async {
    final prefs = await SharedPreferences.getInstance();
    setState(() {
      _trackingEnabled = prefs.getBool('tracking_consent') ?? false;
    });
  }
  
  void _listenToChanges() {
    _manager.consentStateStream.listen((hasConsent) {
      if (mounted) {
        setState(() {
          _trackingEnabled = hasConsent;
        });
      }
    });
  }
  
  /// Handle consent toggle - RUNTIME CHANGES
  Future<void> _handleConsentToggle(bool newValue) async {
    setState(() => _isLoading = true);
    
    final confirmed = await showDialog<bool>(
      context: context,
      builder: (context) => AlertDialog(
        title: Text(newValue ? 'Enable Tracking?' : 'Disable Tracking?'),
        content: Text(newValue 
          ? 'Enable full tracking with IDFA and detailed analytics.'
          : 'Switch to SKAN-only mode. No personal data will be collected.'),
        actions: [
          TextButton(
            onPressed: () => Navigator.pop(context, false),
            child: Text('Cancel'),
          ),
          ElevatedButton(
            onPressed: () => Navigator.pop(context, true),
            child: Text('Confirm'),
          ),
        ],
      ),
    );
    
    if (confirmed == true) {
      // Save preference
      final prefs = await SharedPreferences.getInstance();
      await prefs.setBool('tracking_consent', newValue);
      
      // Apply change to SDK - This triggers transition
      await _manager.handleConsentChange(newValue);
      
      setState(() => _trackingEnabled = newValue);
      
      ScaffoldMessenger.of(context).showSnackBar(
        SnackBar(
          content: Text(newValue 
            ? '‚úÖ Full tracking enabled'
            : 'üîí Switched to SKAN-only mode'),
        ),
      );
    }
    
    setState(() => _isLoading = false);
  }
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Privacy Settings'),
      ),
      body: ListView(
        padding: EdgeInsets.all(16),
        children: [
          Card(
            child: Padding(
              padding: EdgeInsets.all(16),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    _trackingEnabled ? 'Full Tracking Mode' : 'SKAN-Only Mode',
                    style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                  ),
                  SizedBox(height: 8),
                  Text(
                    _trackingEnabled 
                      ? 'IDFA collection and full analytics enabled.'
                      : 'Anonymous SKAN tracking only. Privacy protected.',
                  ),
                ],
              ),
            ),
          ),
          SizedBox(height: 16),
          Card(
            child: SwitchListTile(
              title: Text('Enable Full Tracking'),
              subtitle: Text('Toggle between full and SKAN-only mode'),
              value: _trackingEnabled,
              onChanged: _isLoading ? null : _handleConsentToggle,
            ),
          ),
          SizedBox(height: 16),
          Card(
            child: Padding(
              padding: EdgeInsets.all(16),
              child: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text('Implementation Details', 
                    style: TextStyle(fontWeight: FontWeight.bold)),
                  SizedBox(height: 8),
                  Text('‚Ä¢ Scenario A: Consent Granted - Full tracking'),
                  Text('‚Ä¢ Scenario B: Consent Denied - SKAN only'),
                  Text('‚Ä¢ Scenario C: Runtime Changes - Smooth transition'),
                ],
              ),
            ),
          ),
        ],
      ),
    );
  }
}</div>
                    </div>
                </div>

                <!-- Main App Entry -->
                <div class="code-section">
                    <h3>üöÄ App Entry Point (main.dart)</h3>
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-language">Flutter/Dart</span>
                            <button class="copy-btn" onclick="copyCode('main-code')">üìã Copy Code</button>
                        </div>
                        <div class="code-content" id="main-code">import 'package:flutter/material.dart';
import 'appsflyer_skan_manager.dart';
import 'event_tracker.dart';
import 'privacy_settings.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // Initialize AppsFlyer SKAN Manager
  final manager = AppsFlyerSKANManager();
  await manager.initialize();
  
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'AppsFlyer SKAN Demo',
      theme: ThemeData(primarySwatch: Colors.blue),
      home: HomeScreen(),
    );
  }
}

class HomeScreen extends StatelessWidget {
  final _tracker = EventTracker();
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('AppsFlyer SKAN Demo'),
        actions: [
          IconButton(
            icon: Icon(Icons.settings),
            onPressed: () {
              Navigator.push(
                context,
                MaterialPageRoute(builder: (_) => PrivacySettingsScreen()),
              );
            },
          ),
        ],
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            ElevatedButton(
              onPressed: () => _tracker.trackPurchase(
                revenue: 99.99,
                currency: 'USD',
                productId: 'PRD123',
              ),
              child: Text('Track Purchase'),
            ),
            SizedBox(height: 16),
            ElevatedButton(
              onPressed: () => _tracker.trackSignUp('email', 'user@example.com'),
              child: Text('Track Sign Up'),
            ),
            SizedBox(height: 16),
            ElevatedButton(
              onPressed: () => _tracker.trackAddToCart('PRD123', 29.99),
              child: Text('Track Add to Cart'),
            ),
          ],
        ),
      ),
    );
  }
}</div>
                    </div>
                </div>
            </div>

            <!-- Configuration Tab -->
            <div id="configuration" class="tab-content">
                <h2 class="section-title">AppsFlyer Dashboard Configuration</h2>

                <div class="info-card">
                    <h3>üìã Step-by-Step Configuration</h3>
                    <ol style="margin-left: 20px; margin-top: 10px; line-height: 2;">
                        <li><strong>Access SKAN Dashboard:</strong> Navigate to AppsFlyer ‚Üí SKAN ‚Üí Conversion Studio</li>
                        <li><strong>Create Schema:</strong> Click "Create New Schema" or edit existing</li>
                        <li><strong>Select Measurement Mode:</strong> Choose between "Revenue" or "Engagement" focus</li>
                        <li><strong>Configure Conversion Values:</strong> Map your 6-bit schema (0-63 values)</li>
                        <li><strong>Set Event Priorities:</strong> Order events by business importance</li>
                        <li><strong>Define Measurement Windows:</strong> Set activity windows (0-24h, 24-48h, 48-72h)</li>
                        <li><strong>Test Configuration:</strong> Use sandbox mode for validation</li>
                        <li><strong>Deploy Schema:</strong> Activate for production traffic</li>
                    </ol>
                </div>

                <h3 style="margin-top: 30px;">üéØ Example Configuration: 6-Bit Schema</h3>
                
                <div class="schema-grid">
                    <div class="schema-card">
                        <div class="bit-value">Bits 0-1</div>
                        <div class="event-name">Revenue Bands</div>
                        <div class="event-type">$0, $1-50, $51-100, $100+</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 2</div>
                        <div class="event-name">HBB Revenue</div>
                        <div class="event-type">Yes/No Indicator</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 3</div>
                        <div class="event-name">Mobile Revenue</div>
                        <div class="event-type">Yes/No Indicator</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 4</div>
                        <div class="event-name">Sign Up</div>
                        <div class="event-type">Completed/Not</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 5</div>
                        <div class="event-name">Add to Cart</div>
                        <div class="event-type">Performed/Not</div>
                    </div>
                    
                    <div class="schema-card">
                        <div class="bit-value">Bit 6</div>
                        <div class="event-name">Initiate Checkout</div>
                        <div class="event-type">Started/Not</div>
                    </div>
                </div>
            </div>

            <!-- Conversion Studio Tab -->
            <div id="studio" class="tab-content">
                <h2 class="section-title">üé® SKAN Conversion Studio & Dashboard Analytics</h2>
                
                <div class="info-card">
                    <h3>üìä Understanding the 64 Conversion Value Bundles</h3>
                    <p>AppsFlyer's Conversion Studio allows you to create up to <strong>63 prioritized measurement bundles</strong> (0-63) to capture the full range of user behaviors within SKAN's 6-bit limitation.</p>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 15px;">
                        <h4 style="color: #667eea;">How the 64 Values Work:</h4>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li><strong>Value 0:</strong> Reserved for install (no additional events)</li>
                            <li><strong>Values 1-63:</strong> Available for custom event combinations</li>
                            <li><strong>6-bit Binary:</strong> 2^6 = 64 possible combinations</li>
                            <li><strong>Progressive Nature:</strong> Values can only increase, never decrease</li>
                        </ul>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üéØ Window 1: Fine Conversion Value Configuration</h3>
                    <p>Based on your screenshot, here's how the prioritized bundles are configured:</p>
                    
                    <div style="background: white; border: 2px solid #667eea; border-radius: 10px; padding: 20px; margin-top: 15px;">
                        <h4 style="color: #667eea; margin-bottom: 15px;">Priority Bundle Configuration:</h4>
                        
                        <div style="border-bottom: 1px solid #e0e0e0; padding: 15px 0;">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div style="background: #667eea; color: white; padding: 5px 15px; border-radius: 5px; font-weight: bold;">Priority 1</div>
                                <div style="flex: 1;">
                                    <strong>Revenue (overall)</strong><br>
                                    <code>af_skad_revenue</code><br>
                                    Range: <span style="color: #667eea; font-weight: bold;">$12202.5307 - $15411.7057</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="border-bottom: 1px solid #e0e0e0; padding: 15px 0;">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div style="background: #ff6b6b; color: white; padding: 5px 15px; border-radius: 5px;">In-app events</div>
                                <div style="flex: 1;">
                                    <strong>af_purchase</strong> - 0 to 1 Occurrences<br>
                                    <strong>af_add_to_cart</strong> - 0 to 1 Occurrences<br>
                                    <strong>eCommerce - view_detail - Item</strong> - 0 to 1 Occurrences
                                </div>
                            </div>
                        </div>
                        
                        <div style="padding: 15px 0;">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div style="background: #667eea; color: white; padding: 5px 15px; border-radius: 5px; font-weight: bold;">Priority 2</div>
                                <div style="flex: 1;">
                                    <strong>Revenue (overall)</strong><br>
                                    <code>af_skad_revenue</code><br>
                                    Range: <span style="color: #667eea; font-weight: bold;">$8236.5981 - $12202.5307</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
                            <strong>üìà Conversion Value Mapping:</strong><br>
                            ‚Ä¢ CV 0: Install only<br>
                            ‚Ä¢ CV 1-15: Low revenue + basic events<br>
                            ‚Ä¢ CV 16-31: Medium revenue + engagement events<br>
                            ‚Ä¢ CV 32-47: High revenue + multiple events<br>
                            ‚Ä¢ CV 48-63: Highest revenue + complete funnel
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üìà How Configuration Transforms into Dashboard Analytics</h3>
                    <p>Your second screenshot shows how the Conversion Studio configuration appears in the SKAN Overview dashboard:</p>
                    
                    <div style="background: white; border: 2px solid #667eea; border-radius: 10px; padding: 20px; margin-top: 15px;">
                        <h4 style="color: #667eea;">Dashboard Metrics Explained:</h4>
                        
                        <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                            <thead>
                                <tr style="background: #f8f9fa;">
                                    <th style="padding: 10px; text-align: left; border-bottom: 2px solid #667eea;">Media Source</th>
                                    <th style="padding: 10px; text-align: right; border-bottom: 2px solid #667eea;">Installs</th>
                                    <th style="padding: 10px; text-align: right; border-bottom: 2px solid #667eea;">Null CV Rate</th>
                                    <th style="padding: 10px; text-align: right; border-bottom: 2px solid #667eea;">Cost</th>
                                    <th style="padding: 10px; text-align: right; border-bottom: 2px solid #667eea;">Revenue</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;">Organic</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">333,823</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">N/A</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">N/A</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨1.74</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;">Apple Search Ads</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">7,599</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">0.01%</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨14,607</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨1.71</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;">Google</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">2,923</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">30.41%</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨7,824</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨0.03</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;">Facebook Ads</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">1,607</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">88.18%</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨835</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨0.03</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border-bottom: 1px solid #e0e0e0;">TikTok</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">1,128</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">5.67%</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨2,985</td>
                                    <td style="padding: 10px; text-align: right; border-bottom: 1px solid #e0e0e0;">‚Ç¨1.71</td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px;">Snapchat</td>
                                    <td style="padding: 10px; text-align: right;">864</td>
                                    <td style="padding: 10px; text-align: right;">10.65%</td>
                                    <td style="padding: 10px; text-align: right;">‚Ç¨522</td>
                                    <td style="padding: 10px; text-align: right;">‚Ç¨1.71</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 20px;">
                            <h4 style="color: #667eea;">üìä Key Metrics Explained:</h4>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li><strong>Installs:</strong> Total app installations from each source</li>
                                <li><strong>Click-through installs:</strong> Installs from users who clicked the ad</li>
                                <li><strong>View-through installs:</strong> Installs from users who viewed but didn't click</li>
                                <li><strong>Null CV Rate:</strong> % of installs with no conversion value (privacy threshold)</li>
                                <li><strong>Cost (‚Ç¨):</strong> Total spend per media source</li>
                                <li><strong>Click-to-install rate:</strong> Conversion rate from clicks to installs</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üéØ Campaign ID Constraints by Ad Network</h3>
                    <p>SKAN allows Campaign IDs from 1-100, but each ad network has different limitations on how many campaigns they support:</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
                        
                        <div style="background: white; border: 2px solid #4267B2; border-radius: 10px; padding: 20px;">
                            <h4 style="color: #4267B2; margin-bottom: 10px;">üìò Meta (Facebook)</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Campaign IDs:</strong> 100 (Full range)</li>
                                <li><strong>Structure:</strong> 3-digit hierarchical</li>
                                <li><strong>Mapping:</strong> Campaign (1st digit) + Ad Set (2nd) + Ad (3rd)</li>
                                <li><strong>Best Practice:</strong> Use 10 campaigns √ó 10 ad sets</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; border: 2px solid #4285F4; border-radius: 10px; padding: 20px;">
                            <h4 style="color: #4285F4; margin-bottom: 10px;">üîç Google Ads</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Campaign IDs:</strong> 100 (Full range)</li>
                                <li><strong>Types:</strong> Search, Display, YouTube, App</li>
                                <li><strong>Structure:</strong> Flexible mapping</li>
                                <li><strong>Best Practice:</strong> Group by campaign type</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; border: 2px solid #000000; border-radius: 10px; padding: 20px;">
                            <h4 style="color: #000000; margin-bottom: 10px;">üéµ TikTok</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Campaign IDs:</strong> 100 (Full range)</li>
                                <li><strong>Structure:</strong> Campaign-level mapping</li>
                                <li><strong>Limitation:</strong> One ID per campaign</li>
                                <li><strong>Best Practice:</strong> Reserve IDs by objective</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; border: 2px solid #FF9900; border-radius: 10px; padding: 20px;">
                            <h4 style="color: #FF9900; margin-bottom: 10px;">üì¶ Amazon Ads</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Campaign IDs:</strong> 50-60 effective</li>
                                <li><strong>Types:</strong> Sponsored Products, Brands, Display</li>
                                <li><strong>Limitation:</strong> DSP has separate tracking</li>
                                <li><strong>Best Practice:</strong> Segment by product line</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; border: 2px solid #FFFC00; border-radius: 10px; padding: 20px;">
                            <h4 style="color: #333; margin-bottom: 10px;">üëª Snapchat</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Campaign IDs:</strong> 63 maximum</li>
                                <li><strong>Structure:</strong> Campaign-based</li>
                                <li><strong>Limitation:</strong> Lower than full SKAN range</li>
                                <li><strong>Best Practice:</strong> Focus on top campaigns</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; border: 2px solid #BD081C; border-radius: 10px; padding: 20px;">
                            <h4 style="color: #BD081C; margin-bottom: 10px;">üìå Pinterest</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Campaign IDs:</strong> 100 (Full range)</li>
                                <li><strong>Structure:</strong> Flexible assignment</li>
                                <li><strong>Feature:</strong> Automated campaign mapping</li>
                                <li><strong>Best Practice:</strong> Use auto-mapping</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; border: 2px solid #00B140; border-radius: 10px; padding: 20px;">
                            <h4 style="color: #00B140; margin-bottom: 10px;">üíπ The Trade Desk</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Campaign IDs:</strong> 100 (Full range)</li>
                                <li><strong>Structure:</strong> Advertiser > Campaign > Ad Group</li>
                                <li><strong>Feature:</strong> Cross-device support</li>
                                <li><strong>Best Practice:</strong> Align with DSP structure</li>
                            </ul>
                        </div>
                        
                        <div style="background: white; border: 2px solid #667eea; border-radius: 10px; padding: 20px;">
                            <h4 style="color: #667eea; margin-bottom: 10px;">üéØ Apple Search Ads</h4>
                            <ul style="margin-left: 20px;">
                                <li><strong>Campaign IDs:</strong> 100 (Full range)</li>
                                <li><strong>Structure:</strong> Campaign > Ad Group > Keyword</li>
                                <li><strong>Advantage:</strong> Native SKAN integration</li>
                                <li><strong>Best Practice:</strong> Mirror ASA structure</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h3>‚ö° Campaign ID Best Practices</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                        <div>
                            <h4 style="color: white;">üìã Planning Strategy:</h4>
                            <ul style="margin-left: 20px; color: white;">
                                <li>Reserve IDs 1-10 for top campaigns</li>
                                <li>Use 11-50 for regular campaigns</li>
                                <li>Keep 51-100 for testing/seasonal</li>
                                <li>Document all ID assignments</li>
                            </ul>
                        </div>
                        <div>
                            <h4 style="color: white;">üîÑ Optimization Tips:</h4>
                            <ul style="margin-left: 20px; color: white;">
                                <li>Reuse IDs for ended campaigns</li>
                                <li>Group similar objectives</li>
                                <li>Monitor null CV rates per network</li>
                                <li>Adjust based on performance</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üìä Understanding Null Conversion Values</h3>
                    <p>From your dashboard screenshot, notice the varying Null CV rates:</p>
                    
                    <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; border-radius: 8px; margin-top: 15px;">
                        <h4 style="color: #856404;">‚ö†Ô∏è Why Null CV Rates Differ:</h4>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li><strong>Apple Search Ads (0.01%):</strong> Highest data quality due to Apple's native integration</li>
                            <li><strong>TikTok (5.67%):</strong> Good privacy threshold compliance</li>
                            <li><strong>Google (30.41%):</strong> Medium threshold - some campaigns below privacy limit</li>
                            <li><strong>Facebook (88.18%):</strong> High null rate - many campaigns not meeting threshold</li>
                        </ul>
                        
                        <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
                            <strong>üí° Privacy Threshold Impact:</strong><br>
                            Apple withholds conversion values when install volume is too low to protect user privacy. Higher null rates indicate:
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>Lower install volumes per campaign</li>
                                <li>Too many campaign IDs splitting traffic</li>
                                <li>Need for campaign consolidation</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>üéØ Conversion Value Mapping Visualization</h3>
                    <p>How your 64 conversion values map to user behavior:</p>
                    
                    <div style="background: white; border: 2px solid #667eea; border-radius: 10px; padding: 20px; margin-top: 15px;">
                        <canvas id="cv-visualization" width="800" height="400" style="width: 100%; height: auto;"></canvas>
                        <script>
                            // This would be rendered when the tab is active
                            // Shows visual representation of CV 0-63 mapping
                        </script>
                        
                        <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 5px; margin-top: 20px;">
                            <div style="background: #e8f5e9; padding: 10px; text-align: center; border-radius: 5px;">
                                <strong>0</strong><br>Install
                            </div>
                            <div style="background: #c8e6c9; padding: 10px; text-align: center; border-radius: 5px;">
                                <strong>1-8</strong><br>Low Value
                            </div>
                            <div style="background: #a5d6a7; padding: 10px; text-align: center; border-radius: 5px;">
                                <strong>9-16</strong><br>Engaged
                            </div>
                            <div style="background: #81c784; padding: 10px; text-align: center; border-radius: 5px;">
                                <strong>17-24</strong><br>Active
                            </div>
                            <div style="background: #66bb6a; padding: 10px; text-align: center; border-radius: 5px;">
                                <strong>25-32</strong><br>Purchaser
                            </div>
                            <div style="background: #4caf50; padding: 10px; text-align: center; border-radius: 5px;">
                                <strong>33-40</strong><br>Repeat
                            </div>
                            <div style="background: #43a047; padding: 10px; text-align: center; border-radius: 5px;">
                                <strong>41-48</strong><br>High Value
                            </div>
                            <div style="background: #388e3c; padding: 10px; text-align: center; border-radius: 5px; color: white;">
                                <strong>49-63</strong><br>Premium
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technical Requirements Tab -->
            <div id="requirements" class="tab-content">
                <h2 class="section-title">Technical Requirements</h2>
                
                <div class="info-card">
                    <h3>TR1: AppsFlyer Flutter SDK Integration</h3>
                    <p>GitHub: <a href="https://github.com/AppsFlyerSDK/appsflyer-flutter-plugin" target="_blank">AppsFlyer Flutter Plugin</a></p>
                </div>

                <div class="info-card">
                    <h3>TR2: SKAN Network IDs</h3>
                    <p>GitHub: <a href="https://github.com/skadnetwork/ad-network-ids" target="_blank">SKAdNetwork ID Registry</a></p>
                </div>

                <div class="info-card">
                    <h3>TR3 & TR4: Testing</h3>
                    <p>Documentation: <a href="https://support.appsflyer.com/hc/en-us/articles/207032066" target="_blank">SKAdTest Postback Testing</a></p>
                </div>

                <div class="info-card">
                    <h3>TR5: Developer Documentation</h3>
                    <p>Provide complete documentation including setup guide, QA scenarios, and API reference.</p>
                </div>
            </div>

            <!-- Interactive Demo Tab -->
            <div id="demo" class="tab-content">
                <h2 class="section-title">Interactive SKAN Simulator</h2>

                <div class="interactive-demo">
                    <h3>üéÆ Simulate SKAN Event Flow</h3>
                    <p>Click events to see how they update the conversion value in real-time!</p>
                    
                    <div class="demo-controls">
                        <button class="demo-btn" id="revenue-btn">üí∞ Revenue $150</button>
                        <button class="demo-btn" id="hbb-btn">üì∫ HBB Revenue</button>
                        <button class="demo-btn" id="mobile-btn">üì± Mobile Revenue</button>
                        <button class="demo-btn" id="signup-btn">‚úçÔ∏è Sign Up</button>
                        <button class="demo-btn" id="cart-btn">üõí Add to Cart</button>
                        <button class="demo-btn" id="checkout-btn">üí≥ Checkout</button>
                        <button class="demo-btn" id="reset-btn">üîÑ Reset</button>
                    </div>
                    
                    <div class="demo-output" id="demo-output">
                        <h4>Current State:</h4>
                        <p><span class="status-indicator status-denied"></span>Waiting for events...</p>
                        <div id="conversion-display" style="margin-top: 15px;">
                            <p><strong>Binary:</strong> <span class="highlight">000000</span></p>
                            <p><strong>Decimal CV:</strong> <span class="highlight">0</span></p>
                            <p><strong>Events Tracked:</strong> None</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab management
        document.addEventListener('DOMContentLoaded', function() {
            let conversionState = {
                revenue: 0,
                hbb_revenue: false,
                mobile_revenue: false,
                signup: false,
                add_cart: false,
                checkout: false
            };

            // Tab switching
            const navTabs = document.querySelectorAll('.nav-tab');
            const tabContents = document.querySelectorAll('.tab-content');

            navTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    navTabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                });
            });

            // Copy code functionality
            window.copyCode = function(elementId) {
                const codeElement = document.getElementById(elementId);
                const textArea = document.createElement('textarea');
                textArea.value = codeElement.textContent;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                event.target.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    event.target.textContent = 'üìã Copy Code';
                }, 2000);
            };

            // Download all code
            window.downloadAllCode = function() {
                const allCode = document.querySelectorAll('.code-content');
                let combinedCode = '';
                
                allCode.forEach(code => {
                    combinedCode += code.textContent + '\n\n---\n\n';
                });
                
                const blob = new Blob([combinedCode], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'appsflyer_skan_implementation.dart';
                a.click();
                window.URL.revokeObjectURL(url);
            };

            // Demo functionality
            function updateConversionDisplay() {
                let binary = '';
                binary += conversionState.checkout ? '1' : '0';
                binary += conversionState.add_cart ? '1' : '0';
                binary += conversionState.signup ? '1' : '0';
                binary += conversionState.mobile_revenue ? '1' : '0';
                binary += conversionState.hbb_revenue ? '1' : '0';
                binary += conversionState.revenue.toString(2).padStart(2, '0');
                
                binary = binary.split('').reverse().join('');
                const decimal = parseInt(binary, 2);
                
                const trackedEvents = [];
                if (conversionState.revenue > 0) trackedEvents.push(`Revenue Band ${conversionState.revenue}`);
                if (conversionState.hbb_revenue) trackedEvents.push('HBB Revenue');
                if (conversionState.mobile_revenue) trackedEvents.push('Mobile Revenue');
                if (conversionState.signup) trackedEvents.push('Sign Up');
                if (conversionState.add_cart) trackedEvents.push('Add to Cart');
                if (conversionState.checkout) trackedEvents.push('Checkout');
                
                const displayElement = document.getElementById('conversion-display');
                if (displayElement) {
                    displayElement.innerHTML = `
                        <p><strong>Binary:</strong> <span class="highlight">${binary}</span></p>
                        <p><strong>Decimal CV:</strong> <span class="highlight">${decimal}</span></p>
                        <p><strong>Events Tracked:</strong> ${trackedEvents.length > 0 ? trackedEvents.join(', ') : 'None'}</p>
                    `;
                }
            }

            // Demo button events
            const demoButtons = {
                'revenue-btn': () => { conversionState.revenue = 3; updateConversionDisplay(); },
                'hbb-btn': () => { conversionState.hbb_revenue = true; updateConversionDisplay(); },
                'mobile-btn': () => { conversionState.mobile_revenue = true; updateConversionDisplay(); },
                'signup-btn': () => { conversionState.signup = true; updateConversionDisplay(); },
                'cart-btn': () => { conversionState.add_cart = true; updateConversionDisplay(); },
                'checkout-btn': () => { conversionState.checkout = true; updateConversionDisplay(); },
                'reset-btn': () => {
                    conversionState = {
                        revenue: 0,
                        hbb_revenue: false,
                        mobile_revenue: false,
                        signup: false,
                        add_cart: false,
                        checkout: false
                    };
                    updateConversionDisplay();
                }
            };

            Object.keys(demoButtons).forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    btn.addEventListener('click', demoButtons[btnId]);
                }
            });
        });
    </script>
</body>
</html>
